{% import "macros/declarations.jinja2" as macros %}
{% import "macros/utils.jinja2" as utils %}
// AUTOMATICALLY GENERATED FILE - DO NOT EDIT

#ifndef {{ package_name.upper() }}_{{ class.bare_type }}_H
#define {{ package_name.upper() }}_{{ class.bare_type }}_H

#include "{{ incfolder }}{{ class.bare_type }}Const.h"
#include "{{ incfolder }}{{ class.bare_type }}Obj.h"

{% for include in includes %}
{{ include }}
{% endfor %}
#include "podio/ObjectID.h"
#include "podio/MaybeSharedPtr.h"
#include <ostream>

{{ utils.forward_decls(forward_declarations) }}

{{ utils.namespace_open(class.namespace) }}

{{ macros.class_description(class.bare_type, Description, Author) }}
class {{ class.bare_type }} {

  friend class {{ class.bare_type }}Collection;
  friend class {{ class.bare_type }}CollectionIterator;
  friend class Const{{ class.bare_type }};

public:

{{ macros.common_constructors_destructors(class.bare_type, Members) }}
{% if Members %}
  /// Constructor initializing data members
  {{  class.bare_type }}({{ Members | map(attribute='signature') | join(', ')  }});
{% endif %}

  /// conversion to const object
  operator Const{{ class.bare_type }}() const;

public:

{{ macros.member_getters(Members, use_get_syntax) }}
{{ macros.single_relation_getters(OneToOneRelations, use_get_syntax) }}
{{ macros.member_setters(Members, use_get_syntax) }}
{{ macros.single_relation_setters(OneToOneRelations, use_get_syntax) }}
{{ macros.multi_relation_handling(OneToManyRelations + VectorMembers, use_get_syntax, with_adder=True) }}
{{ utils.if_present(ExtraCode, "declaration") }}
{{ utils.if_present(ConstExtraCode, "declaration") }}
{{ macros.common_object_funcs(class.bare_type) }}
  /// disconnect from {{ type }}Obj instance
  void unlink() { m_obj = podio::MaybeSharedPtr<{{ class.bare_type }}Obj>(nullptr); }

private:
  /// constructor from existing {{ type }}Obj
  explicit {{ class.bare_type }}(podio::MaybeSharedPtr<{{ class.bare_type }}Obj> obj);

  // {{ class.bare_type }}Obj* m_obj;
  podio::MaybeSharedPtr<{{ class.bare_type }}Obj> m_obj;
};

std::ostream& operator<<(std::ostream& o, const Const{{ class.bare_type }}& value);

{{ utils.namespace_close(class.namespace) }}

#endif
